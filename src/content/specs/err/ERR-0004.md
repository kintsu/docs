---
author: joshua-auchincloss
components:
  - parser
  - compiler
created: 2025-12-25
kind: ERR
number: 4
status: draft
title: Namespace Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0004: Namespace Errors

## Overview

This specification defines the KNS (Kintsu Namespace) error domain, covering all errors related to namespace declaration, organisation, and resolution within Kintsu schema files.

## Domain Summary

| Code    | Name                 | Severity | Category   |
| ------- | -------------------- | -------- | ---------- |
| KNS1001 | NsNotDeclared        | Error    | Resolution |
| KNS3001 | NsConflict           | Error    | Conflict   |
| KNS3002 | NsDirConflict        | Error    | Conflict   |
| KNS3003 | NamespaceMismatch    | Error    | Conflict   |
| KNS3004 | DuplicateNamespace   | Error    | Conflict   |
| KNS1002 | UnresolvedDependency | Error    | Resolution |
| KNS4001 | UsePathNotFound      | Error    | Missing    |

---

## Error Definitions

### KNS1001: NsNotDeclared

**Severity:** Error
**Phase:** Parsing

**Message:**

```
namespace is not declared
```

**Primary Span:** The file location where a namespace was expected

**Help:** Add a `namespace` declaration at the top of your schema file.

**Example:**

```
error[KNS1001]: namespace is not declared
  --> schema/user.ks:1:1
   |
 1 | struct User {
   | ^^^^^^ expected namespace declaration before type definitions
   |
   = help: add `namespace your::namespace;` at the top of the file
```

**References:** [TSY-0001](/specs/tsy/tsy-0001) (Namespace Syntax)

---

### KNS3001: NsConflict

**Severity:** Error
**Phase:** Parsing

**Message:**

```
only one namespace may be declared in a payload declaration file
```

**Primary Span:** The second namespace declaration

**Related Spans:** The first namespace declaration

**Help:** Remove the duplicate namespace declaration. Each file may only declare one namespace.

**Example:**

```
error[KNS3001]: only one namespace may be declared in a payload declaration file
  --> schema/user.ks:5:1
   |
 1 | namespace foo::bar;
   | ------------------- first namespace declared here
   |
 5 | namespace baz::qux;
   | ^^^^^^^^^^^^^^^^^^^ duplicate namespace declaration
   |
   = help: remove the duplicate namespace declaration
```

**References:** [TSY-0001](/specs/tsy/tsy-0001) (Namespace Syntax)

---

### KNS3002: NsDirConflict

**Severity:** Error
**Phase:** Compilation

**Message:**

```
namespace {namespace} is already declared for {parent}, {attempted} cannot be declared
```

**Primary Span:** The conflicting file path

**Related Spans:** The original namespace declaration location

**Help:** Reorganise your schema directory structure so each namespace maps to exactly one directory.

**Example:**

```
error[KNS3002]: namespace api::v1 is already declared for schema/api/v1/lib.ks, schema/other/api.ks cannot be declared
  --> schema/other/api.ks:1:1
   |
 1 | namespace api::v1;
   | ^^^^^^^^^^^^^^^^^^ conflicts with existing namespace
   |
   = help: each namespace must correspond to exactly one directory
   = help: consider renaming to a unique namespace
```

**References:** [SPEC-0007](/specs/spec/spec-0007) (Namespace Compilation)

---

### KNS3003: NamespaceMismatch

**Severity:** Error
**Phase:** Compilation

**Message:**

```
namespace mismatch: expected {expected}, found {found}
```

**Primary Span:** The namespace declaration

**Help:** Ensure the declared namespace matches the expected namespace based on the file's directory location.

**Example:**

```
error[KNS3003]: namespace mismatch: expected api::users, found api::accounts
  --> schema/api/users/mod.ks:1:1
   |
 1 | namespace api::accounts;
   | ^^^^^^^^^^^^^^^^^^^^^^^^ declared namespace
   |
   = help: file is in `schema/api/users/`, expected `namespace api::users;`
```

**References:** [SPEC-0007](/specs/spec/spec-0007) (Namespace Compilation)

---

### KNS3004: DuplicateNamespace

**Severity:** Error
**Phase:** Compilation

**Message:**

```
namespace {name} is declared multiple times
```

**Primary Span:** The duplicate namespace declaration

**Related Spans:** Previous declaration location(s)

**Help:** Each namespace name must be unique across the entire schema. Rename one of the conflicting namespaces.

**Example:**

```
error[KNS3004]: namespace api::v1 is declared multiple times
  --> schema/services/api.ks:1:1
   |
   = note: first declared at schema/api/v1/lib.ks:1:1
   |
 1 | namespace api::v1;
   | ^^^^^^^^^^^^^^^^^^ duplicate declaration
   |
   = help: rename this namespace to be unique
```

**References:** [SPEC-0007](/specs/spec/spec-0007) (Namespace Compilation)

---

### KNS1002: UnresolvedDependency

**Severity:** Error
**Phase:** Resolution

**Message:**

```
use statement '{name}' is not a local namespace and not in package dependencies
```

**Primary Span:** The use statement

**Help:** Either create the local namespace or add the package to your dependencies in `kintsu.toml`.

**Example:**

```
error[KNS1002]: use statement 'external_api' is not a local namespace and not in package dependencies
  --> schema/lib.ks:3:1
   |
 3 | use external_api;
   | ^^^^^^^^^^^^^^^^^ unresolved dependency
   |
   = help: add `external_api` to [dependencies] in kintsu.toml
   = help: or create a local namespace with `namespace external_api;`
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KNS4001: UsePathNotFound

**Severity:** Error
**Phase:** Resolution

**Message:**

```
use statement '{name}' does not correspond to a .ks file or directory
```

**Primary Span:** The use statement

**Help:** Ensure the referenced path exists as either a `.ks` file or a directory containing schema files.

**Example:**

```
error[KNS4001]: use statement 'models' does not correspond to a .ks file or directory
  --> schema/lib.ks:2:1
   |
 2 | use models;
   | ^^^^^^^^^^^ path not found
   |
   = help: create `schema/models.ks` or `schema/models/lib.ks`
```

**References:** [SPEC-0007](/specs/spec/spec-0007) (Namespace Compilation)

---

## References

- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture
- [ERR-0001](/specs/err/err-0001) - Error System Overview
- [TSY-0001](/specs/tsy/tsy-0001) - Namespace Syntax
- [SPEC-0007](/specs/spec/spec-0007) - Namespace Compilation

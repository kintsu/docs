---
author: joshua-auchincloss
components:
  - parser
created: 2025-12-25
kind: ERR
number: 2
status: draft
title: Lexical Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0002: Lexical Errors (KLX)

## Overview

This specification defines all error codes in the **Lexical (KLX)** domain. Lexical errors occur during the first compilation phase when raw source text is converted into tokens. These errors indicate malformed character sequences that cannot form valid tokens.

**Domain Code:** `LX`
**Phase:** Lexing
**Span Required:** Yes (character-level precision)

## Error Code Registry

| Code    | Name                  | Severity | Category |
| ------- | --------------------- | -------- | -------- |
| KLX0001 | UnknownCharacter      | Error    | Syntax   |
| KLX0002 | InvalidIntegerLiteral | Error    | Syntax   |
| KLX0003 | InvalidFloatLiteral   | Error    | Syntax   |
| KLX0004 | InvalidBooleanLiteral | Error    | Syntax   |
| KLX0005 | UnterminatedString    | Error    | Syntax   |
| KLX0006 | InvalidEscapeSequence | Error    | Syntax   |
| KLX9001 | UnknownLexingError    | Error    | Internal |

## Error Definitions

### KLX0001: UnknownCharacter

**Severity:** Error
**Phase:** Lexing

**Message:**

```
invalid character '{char}'
```

**Primary Span:** The unrecognised character position

**Help:** Check for non-ASCII characters or unsupported symbols. Kintsu source files must be valid UTF-8.

**Example:**

```
error[KLX0001]: invalid character '§'
  --> schema/types.ks:5:10
   |
 5 |     name§: str,
   |          ^ invalid character
   |
   = help: remove or replace this character
```

---

### KLX0002: InvalidIntegerLiteral

**Severity:** Error
**Phase:** Lexing

**Message:**

```
invalid integer literal: {reason}
```

**Primary Span:** The malformed integer literal

**Help:** Integer literals must be valid decimal numbers. Leading zeros are not allowed except for `0` itself.

**Example:**

```
error[KLX0002]: invalid integer literal: number too large
  --> schema/types.ks:3:15
   |
 3 |     max_size = 99999999999999999999999,
   |                ^^^^^^^^^^^^^^^^^^^^^^^ number exceeds i64 range
   |
   = help: use a smaller value or consider a string representation
```

---

### KLX0003: InvalidFloatLiteral

**Severity:** Error
**Phase:** Lexing

**Message:**

```
invalid float literal: {reason}
```

**Primary Span:** The malformed float literal

**Help:** Float literals must have digits on both sides of the decimal point.

**Example:**

```
error[KLX0003]: invalid float literal: missing digits after decimal
  --> schema/types.ks:3:12
   |
 3 |     value = 3.,
   |             ^^ expected digits after '.'
   |
   = help: write '3.0' instead of '3.'
```

---

### KLX0004: InvalidBooleanLiteral

**Severity:** Error
**Phase:** Lexing

**Message:**

```
invalid boolean literal: expected 'true' or 'false'
```

**Primary Span:** The malformed boolean

**Help:** Boolean values must be exactly `true` or `false` (lowercase).

**Example:**

```
error[KLX0004]: invalid boolean literal: expected 'true' or 'false'
  --> schema/types.ks:3:15
   |
 3 |     enabled = True,
   |               ^^^^ not a valid boolean
   |
   = help: use lowercase 'true' instead of 'True'
```

---

### KLX0005: UnterminatedString

**Severity:** Error
**Phase:** Lexing

**Message:**

```
unterminated string literal
```

**Primary Span:** From the opening quote to end of line/file

**Help:** String literals must be closed with a matching quote on the same line.

**Example:**

```
error[KLX0005]: unterminated string literal
  --> schema/types.ks:3:12
   |
 3 |     name = "hello
   |            ^^^^^^ string not closed
   |
   = help: add closing '"' before end of line
```

---

### KLX0006: InvalidEscapeSequence

**Severity:** Error
**Phase:** Lexing

**Message:**

```
invalid escape sequence '\{char}'
```

**Primary Span:** The invalid escape sequence

**Help:** Valid escape sequences are: `\\`, `\"`, `\n`, `\r`, `\t`.

**Example:**

```
error[KLX0006]: invalid escape sequence '\q'
  --> schema/types.ks:3:18
   |
 3 |     pattern = "a\qb",
   |                  ^^ unknown escape
   |
   = help: valid escapes are \\, \", \n, \r, \t
```

---

### KLX9001: UnknownLexingError

**Severity:** Error
**Phase:** Lexing

**Message:**

```
unknown lexing error
```

**Primary Span:** Best available position

**Help:** This error indicates an unexpected lexer state. Please report this as a bug.

**Example:**

```
error[KLX9001]: unknown lexing error
  --> schema/types.ks:1:1
   |
   = help: this may be a compiler bug; please report at https://github.com/kintsu/kintsu/issues
```

## References

- [ERR-0001](/specs/err/err-0001) - Error System Overview
- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture

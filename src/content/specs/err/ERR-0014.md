---
author: joshua-auchincloss
components:
  - compiler
created: 2025-12-25
kind: ERR
number: 14
status: draft
title: Internal Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0014: Internal Errors

## Overview

This specification defines the KIN (Kintsu INternal) error domain, covering all internal compiler errors that indicate bugs in the compiler implementation rather than user errors.

## Domain Summary

| Code    | Name                       | Severity | Category |
| ------- | -------------------------- | -------- | -------- |
| KIN9001 | InternalError              | Error    | Internal |
| KIN9002 | FailedToCreateNamespaceCtx | Error    | Internal |
| KIN9003 | UnreachableCode            | Error    | Internal |
| KIN9004 | AssertionFailed            | Error    | Internal |

---

## Error Definitions

### KIN9001: InternalError

**Severity:** Error
**Phase:** Any

**Message:**

```text title="KIN9001 message"
internal error: {message}
```

**Primary Span:** Context-dependent (may be absent)

**Help:** This is a compiler bug. Please report it with the full error message and schema file.

**Example:**

```text title="KIN9001 example"
error[KIN9001]: internal error: unexpected state during type resolution
  --> schema/models.ks:15:1
   |
   = note: this is a bug in the Kintsu compiler
   = help: please report this at https://github.com/kintsu-lang/kintsu/issues
   = help: include this error message and your schema file
```

---

### KIN9002: FailedToCreateNamespaceCtx

**Severity:** Error
**Phase:** Compilation

**Message:**

```text title="KIN9002 message"
failed to create namespace context
```

**Primary Span:** N/A

**Help:** This is a compiler bug. Please report it.

**Example:**

```text title="KIN9002 example"
error[KIN9002]: failed to create namespace context
   |
   = note: this is a bug in the Kintsu compiler
   = help: please report this at https://github.com/kintsu-lang/kintsu/issues
```

---

### KIN9003: UnreachableCode

**Severity:** Error
**Phase:** Any

**Message:**

```text title="KIN9003 message"
internal error: reached unreachable code: {location}
```

**Primary Span:** N/A

**Help:** This is a compiler bug. Please report it.

**Example:**

```text title="KIN9003 example"
error[KIN9003]: internal error: reached unreachable code: type_resolution::resolve_alias
   |
   = note: this is a bug in the Kintsu compiler
   = help: please report this at https://github.com/kintsu-lang/kintsu/issues
```

---

### KIN9004: AssertionFailed

**Severity:** Error
**Phase:** Any

**Message:**

```text title="KIN9004 message"
internal assertion failed: {condition}
```

**Primary Span:** N/A

**Help:** This is a compiler bug. Please report it.

**Example:**

```text title="KIN9004 example"
error[KIN9004]: internal assertion failed: type_registry.contains(type_id)
   |
   = note: this is a bug in the Kintsu compiler
   = help: please report this at https://github.com/kintsu-lang/kintsu/issues
```

---

## Design Notes

### Internal Error Philosophy

Internal errors indicate bugs in the compiler itself, not user mistakes. They should:

1. **Be rare**: Well-tested compilers should almost never emit internal errors
2. **Be informative**: Include enough context to reproduce and fix the bug
3. **Guide reporting**: Always include instructions for reporting the bug
4. **Not expose internals**: Avoid leaking implementation details that confuse users

### Recovery Strategy

Internal errors are unrecoverable. The compiler should:

1. Emit the error with full context
2. Suggest reporting the bug
3. Exit with a non-zero status code
4. Not attempt to continue compilation

### ICE (Internal Compiler Error)

In Rust compiler terminology, these are "ICE" errors. Kintsu follows similar conventions:

- All KIN errors are prefixed with category 9 (internal)
- All include bug reporting guidance
- All exit compilation immediately

## References

- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture
- [ERR-0001](/specs/err/err-0001) - Error System Overview

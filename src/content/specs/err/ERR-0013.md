---
author: joshua-auchincloss
components:
  - compiler
created: 2025-12-25
kind: ERR
number: 13
status: draft
title: Filesystem Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0013: Filesystem Errors

## Overview

This specification defines the KFS (Kintsu FileSystem) error domain, covering all errors related to file operations, directory structure, and I/O during schema compilation.

## Domain Summary

| Code    | Name               | Severity | Category   |
| ------- | ------------------ | -------- | ---------- |
| KFS4001 | FileNotFound       | Error    | Missing    |
| KFS4002 | MissingLibKs       | Error    | Missing    |
| KFS2001 | InvalidGlobPattern | Error    | Validation |
| KFS2002 | EmptyFileList      | Error    | Validation |
| KFS9001 | IoError            | Error    | Internal   |
| KFS9002 | PermissionDenied   | Error    | Internal   |

---

## Error Definitions

### KFS4001: FileNotFound

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS4001 message"
file not found: {path}
```

**Primary Span:** The import or reference to the file

**Help:** Check that the file exists at the specified path.

**Example:**

```text title="KFS4001 example"
error[KFS4001]: file not found: schema/models/user.ks
  --> schema/lib.ks:3:1
   |
 3 | use models::user;
   | ^^^^^^^^^^^^^^^^ referenced file not found
   |
   = help: create the file or check the path
```

---

### KFS4002: MissingLibKs

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS4002 message"
missing lib.ks: every schema must have a schema/lib.ks file
```

**Primary Span:** N/A (no source location)

**Help:** Create a `lib.ks` file in your schema root directory.

**Example:**

```text title="KFS4002 example"
error[KFS4002]: missing lib.ks: every schema must have a schema/lib.ks file
   |
   = help: create schema/lib.ks with your namespace declaration
   = help: example: `namespace my_project;`
```

---

### KFS2001: InvalidGlobPattern

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS2001 message"
glob pattern error: {reason}
```

**Primary Span:** The glob pattern

**Help:** Fix the glob pattern syntax.

**Example:**

```text title="KFS2001 example"
error[KFS2001]: glob pattern error: invalid character in pattern
  --> kintsu.toml:5:10
   |
 5 | include = "schema/[invalid"
   |            ^^^^^^^^^^^^^^^^ unclosed bracket
   |
   = help: close the character class: "schema/[a-z]*"
```

---

### KFS2002: EmptyFileList

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS2002 message"
no files provided to load_files
```

**Primary Span:** N/A

**Help:** Ensure your schema directory contains `.ks` files or adjust your include patterns.

**Example:**

```text title="KFS2002 example"
error[KFS2002]: no files provided to load_files
   |
   = note: no .ks files found in schema directory
   = help: check your include/exclude patterns in kintsu.toml
```

---

### KFS9001: IoError

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS9001 message"
I/O error: {reason}
```

**Primary Span:** N/A

**Help:** Check file system permissions and disk space.

**Example:**

```text title="KFS9001 example"
error[KFS9001]: I/O error: no space left on device
   |
   = help: free up disk space and try again
```

---

### KFS9002: PermissionDenied

**Severity:** Error
**Phase:** Loading

**Message:**

```text title="KFS9002 message"
permission denied: {path}
```

**Primary Span:** N/A

**Help:** Check file permissions and ownership.

**Example:**

```text title="KFS9002 example"
error[KFS9002]: permission denied: schema/private/internal.ks
   |
   = help: check file permissions: `chmod +r schema/private/internal.ks`
```

---

## References

- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture
- [ERR-0001](/specs/err/err-0001) - Error System Overview

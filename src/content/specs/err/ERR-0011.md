---
author: joshua-auchincloss
components:
  - compiler
created: 2025-12-25
kind: ERR
number: 11
status: draft
title: Package Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0011: Package Errors

## Overview

This specification defines the KPK (Kintsu PacKage) error domain, covering all errors related to package manifests (`kintsu.toml`), lockfiles, and dependency resolution.

## Domain Summary

| Code    | Name                      | Severity | Category      |
| ------- | ------------------------- | -------- | ------------- |
| KPK0001 | ManifestParseError        | Error    | Syntax        |
| KPK4001 | ManifestNotFound          | Error    | Missing       |
| KPK4002 | LockfileNotFound          | Error    | Missing       |
| KPK6001 | DependencyVersionMismatch | Error    | Compatibility |
| KPK6002 | LockfileOutOfDate         | Warning  | Compatibility |
| KPK3001 | DuplicateDependency       | Error    | Conflict      |

---

## Error Definitions

### KPK0001: ManifestParseError

**Severity:** Error
**Phase:** Initialisation

**Message:**

```
failed to parse kintsu.toml: {reason}
```

**Primary Span:** The invalid line or token in the manifest

**Help:** Fix the TOML syntax error in your `kintsu.toml` file.

**Example:**

```
error[KPK0001]: failed to parse kintsu.toml: expected '=' after key
  --> kintsu.toml:5:12
   |
 5 | name "my-package"
   |      ^ expected '='
   |
   = help: use `name = "my-package"`
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KPK4001: ManifestNotFound

**Severity:** Error
**Phase:** Initialisation

**Message:**

```
kintsu.toml not found in {directory}
```

**Primary Span:** N/A (no source location)

**Help:** Create a `kintsu.toml` file in your project root.

**Example:**

```
error[KPK4001]: kintsu.toml not found in /path/to/project
   |
   = help: run `kintsu init` to create a new package
   = help: or create kintsu.toml manually
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KPK4002: LockfileNotFound

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
kintsu.lock not found but dependencies are specified
```

**Primary Span:** N/A (no source location)

**Help:** Run `kintsu install` to generate the lockfile.

**Example:**

```
error[KPK4002]: kintsu.lock not found but dependencies are specified
   |
   = help: run `kintsu install` to resolve and lock dependencies
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KPK6001: DependencyVersionMismatch

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
dependency version conflict: {package} requires {required}, but {other} requires {other_required}
```

**Primary Span:** The dependency declaration

**Help:** Resolve the version conflict by updating one of the dependencies.

**Example:**

```
error[KPK6001]: dependency version conflict: common requires ^1.0.0, but api requires ^2.0.0
  --> kintsu.toml:8:1
   |
 8 | common = "^1.0.0"
   | ^^^^^^^^^^^^^^^^^ requires ^1.0.0
   |
   = note: api@1.0.0 requires common@^2.0.0
   = help: update common to a version satisfying both constraints
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KPK6002: LockfileOutOfDate

**Severity:** Warning
**Phase:** Dependency Resolution

**Message:**

```
kintsu.lock is out of date with kintsu.toml
```

**Primary Span:** N/A

**Help:** Run `kintsu install` to update the lockfile.

**Example:**

```
warning[KPK6002]: kintsu.lock is out of date with kintsu.toml
   |
   = note: kintsu.toml has been modified since lockfile was generated
   = help: run `kintsu install` to update dependencies
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

### KPK3001: DuplicateDependency

**Severity:** Error
**Phase:** Initialisation

**Message:**

```
duplicate dependency '{name}' in kintsu.toml
```

**Primary Span:** The duplicate dependency entry

**Help:** Remove the duplicate dependency declaration.

**Example:**

```
error[KPK3001]: duplicate dependency 'common' in kintsu.toml
  --> kintsu.toml:12:1
   |
 8 | common = "^1.0.0"
   | ----------------- first declaration
   |
12 | common = "^2.0.0"
   | ^^^^^^^^^^^^^^^^^ duplicate declaration
   |
   = help: remove one of the duplicate entries
```

**References:** [SPEC-0015](/specs/spec/spec-0015) (Package Manifest)

---

## References

- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture
- [ERR-0001](/specs/err/err-0001) - Error System Overview
- [SPEC-0015](/specs/spec/spec-0015) - Package Manifest

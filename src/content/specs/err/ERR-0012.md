---
author: joshua-auchincloss
components:
  - compiler
created: 2025-12-25
kind: ERR
number: 12
status: draft
title: Registry Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0012: Registry Errors

## Overview

This specification defines the KRG (Kintsu ReGistry) error domain, covering all errors related to package registry operations including publishing, fetching, and authentication.

## Domain Summary

| Code    | Name                 | Severity | Category   |
| ------- | -------------------- | -------- | ---------- |
| KRG1001 | PackageNotFound      | Error    | Resolution |
| KRG1002 | VersionNotFound      | Error    | Resolution |
| KRG2001 | AuthenticationFailed | Error    | Validation |
| KRG2002 | AuthorisationFailed  | Error    | Validation |
| KRG2003 | InvalidPackageName   | Error    | Validation |
| KRG3001 | VersionAlreadyExists | Error    | Conflict   |
| KRG9001 | NetworkError         | Error    | Internal   |
| KRG9002 | RegistryUnavailable  | Error    | Internal   |

---

## Error Definitions

### KRG1001: PackageNotFound

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
package '{name}' not found in registry
```

**Primary Span:** The dependency declaration

**Help:** Check the package name spelling or verify the package exists in the registry.

**Example:**

```
error[KRG1001]: package 'kintsu-common' not found in registry
  --> kintsu.toml:8:1
   |
 8 | kintsu-common = "^1.0.0"
   | ^^^^^^^^^^^^^ package not found
   |
   = help: did you mean 'kintsu-common'?
   = help: run `kintsu search common` to find similar packages
```

---

### KRG1002: VersionNotFound

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
version '{version}' of package '{name}' not found
```

**Primary Span:** The version specifier

**Help:** Check available versions or relax the version constraint.

**Example:**

```
error[KRG1002]: version '^3.0.0' of package 'common' not found
  --> kintsu.toml:8:12
   |
 8 | common = "^3.0.0"
   |           ^^^^^^^ no matching version
   |
   = note: available versions: 1.0.0, 1.1.0, 2.0.0, 2.1.0
   = help: use `common = "^2.0.0"` for latest compatible version
```

---

### KRG2001: AuthenticationFailed

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
authentication failed: {reason}
```

**Primary Span:** N/A (no source location)

**Help:** Log in to the registry with valid credentials.

**Example:**

```
error[KRG2001]: authentication failed: invalid or expired token
   |
   = help: run `kintsu login` to authenticate
```

---

### KRG2002: AuthorisationFailed

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
not authorised to {action} package '{name}'
```

**Primary Span:** N/A

**Help:** Request access from the package owner or organisation administrator.

**Example:**

```
error[KRG2002]: not authorised to publish package 'acme-internal'
   |
   = note: you must be a member of the 'acme' organisation
   = help: request access from the package owner
```

---

### KRG2003: InvalidPackageName

**Severity:** Error
**Phase:** Validation

**Message:**

```
invalid package name '{name}': {reason}
```

**Primary Span:** The package name in manifest

**Help:** Package names must be lowercase alphanumeric with hyphens only.

**Example:**

```
error[KRG2003]: invalid package name 'My_Package': uppercase characters not allowed
  --> kintsu.toml:2:8
   |
 2 | name = "My_Package"
   |         ^^^^^^^^^^ invalid name
   |
   = help: use lowercase with hyphens: "my-package"
```

---

### KRG3001: VersionAlreadyExists

**Severity:** Error
**Phase:** Publish

**Message:**

```
version '{version}' of package '{name}' already exists
```

**Primary Span:** The version in manifest

**Help:** Increment the version number before publishing.

**Example:**

```
error[KRG3001]: version '1.0.0' of package 'my-package' already exists
  --> kintsu.toml:3:11
   |
 3 | version = "1.0.0"
   |            ^^^^^ already published
   |
   = help: increment version to "1.0.1" or "1.1.0"
```

---

### KRG9001: NetworkError

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
network error: {reason}
```

**Primary Span:** N/A

**Help:** Check your network connection and try again.

**Example:**

```
error[KRG9001]: network error: connection timed out
   |
   = help: check your internet connection
   = help: retry with `--retry` flag
```

---

### KRG9002: RegistryUnavailable

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
registry unavailable: {reason}
```

**Primary Span:** N/A

**Help:** The registry service may be experiencing issues. Try again later.

**Example:**

```
error[KRG9002]: registry unavailable: service maintenance
   |
   = note: the registry is undergoing scheduled maintenance
   = help: try again in a few minutes
```

---

## References

- [RFC-0023](/specs/rfc/rfc-0023) - Error Handling Design
- [SPEC-0022](/specs/spec/spec-0022) - Error System Architecture
- [ERR-0001](/specs/err/err-0001) - Error System Overview
- [SPEC-0019](/specs/spec/spec-0019) - Registry API

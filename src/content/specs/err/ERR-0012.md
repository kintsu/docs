---
author: joshua-auchincloss
components:
  - compiler
created: 2025-12-25
kind: ERR
number: 12
status: draft
title: Registry Errors
updates:
  - author: joshua-auchincloss
    date: 2025-12-26
    description: Added KRG1003 RegistryNotConfigured, KRG2004 TokenExpired, KRG2005 InvalidRegistryUrl, KRG4001-4002 credential errors; corrected manifest filename to schema.toml
  - author: joshua-auchincloss
    date: 2025-12-25
    description: Created specification
version_after: 0.1.0
version_before: null
---

# ERR-0012: Registry Errors

## Overview

This specification defines the KRG (Kintsu ReGistry) error domain, covering all errors related to package registry operations including publishing, fetching, authentication, and configuration.

## Domain Summary

### Resolution Errors

| Code    | Name                  | Severity | Category   |
| ------- | --------------------- | -------- | ---------- |
| KRG1001 | PackageNotFound       | Error    | Resolution |
| KRG1002 | VersionNotFound       | Error    | Resolution |
| KRG1003 | RegistryNotConfigured | Error    | Resolution |

### Validation Errors

| Code    | Name                 | Severity | Category   |
| ------- | -------------------- | -------- | ---------- |
| KRG2001 | AuthenticationFailed | Error    | Validation |
| KRG2002 | AuthorisationFailed  | Error    | Validation |
| KRG2003 | InvalidPackageName   | Error    | Validation |
| KRG2004 | TokenExpired         | Error    | Validation |
| KRG2005 | InvalidRegistryUrl   | Error    | Validation |

### Conflict Errors

| Code    | Name                 | Severity | Category |
| ------- | -------------------- | -------- | -------- |
| KRG3001 | VersionAlreadyExists | Error    | Conflict |

### Missing Errors

| Code    | Name                       | Severity | Category |
| ------- | -------------------------- | -------- | -------- |
| KRG4001 | CredentialStoreUnavailable | Error    | Missing  |
| KRG4002 | CredentialNotFound         | Error    | Missing  |

### Internal Errors

| Code    | Name                | Severity | Category |
| ------- | ------------------- | -------- | -------- |
| KRG9001 | NetworkError        | Error    | Internal |
| KRG9002 | RegistryUnavailable | Error    | Internal |

---

## Error Definitions

### KRG1001: PackageNotFound

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
package '{name}' not found in registry
```

**Primary Span:** The dependency declaration

**Help:** Check the package name spelling or verify the package exists in the registry.

**Example:**

```
error[KRG1001]: package 'kintsu-common' not found in registry
  --> schema.toml:8:1
   |
 8 | kintsu-common = "^1.0.0"
   | ^^^^^^^^^^^^^ package not found
   |
   = help: did you mean 'kintsu-common'?
   = help: run `kintsu search common` to find similar packages
```

**References:** [RFC-0019](/specs/rfc/RFC-0019) (Package Manifest Format), [RFC-0021](/specs/rfc/RFC-0021) (Registry API)

---

### KRG1002: VersionNotFound

**Severity:** Error
**Phase:** Dependency Resolution

**Message:**

```
version '{version}' of package '{name}' not found
```

**Primary Span:** The version specifier

**Help:** Check available versions or relax the version constraint.

**Example:**

```
error[KRG1002]: version '^3.0.0' of package 'common' not found
  --> schema.toml:8:12
   |
 8 | common = "^3.0.0"
   |           ^^^^^^^ no matching version
   |
   = note: available versions: 1.0.0, 1.1.0, 2.0.0, 2.1.0
   = help: use `common = "^2.0.0"` for latest compatible version
```

**References:** [RFC-0019](/specs/rfc/RFC-0019) (Package Manifest Format)

---

### KRG1003: RegistryNotConfigured

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
registry '{name}' not configured
```

**Primary Span:** The registry reference in manifest

**Help:** Add the registry to your kintsu.toml configuration.

**Example:**

```
error[KRG1003]: registry 'corp' not configured
  --> schema.toml:8:22
   |
 8 | internal = { version = "^1.0", registry = "corp" }
   |                                           ^^^^^^ unknown registry
   |
   = help: add registry to kintsu.toml:
   = help:   [registries.corp]
   = help:   url = "https://registry.corp.example.com"
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG2001: AuthenticationFailed

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
authentication failed: {reason}
```

**Primary Span:** N/A (no source location)

**Help:** Log in to the registry with valid credentials.

**Example:**

```
error[KRG2001]: authentication failed: invalid or expired token
   |
   = help: run `kintsu login` to authenticate
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG2002: AuthorisationFailed

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
not authorised to {action} package '{name}'
```

**Primary Span:** N/A

**Help:** Request access from the package owner or organisation administrator.

**Example:**

```
error[KRG2002]: not authorised to publish package 'acme-internal'
   |
   = note: you must be a member of the 'acme' organisation
   = help: request access from the package owner
```

**References:** [RFC-0021](/specs/rfc/RFC-0021) (Registry API)

---

### KRG2003: InvalidPackageName

**Severity:** Error
**Phase:** Validation

**Message:**

```
invalid package name '{name}': {reason}
```

**Primary Span:** The package name in manifest

**Help:** Package names must be lowercase alphanumeric with hyphens only.

**Example:**

```
error[KRG2003]: invalid package name 'My_Package': uppercase characters not allowed
  --> schema.toml:2:8
   |
 2 | name = "My_Package"
   |         ^^^^^^^^^^ invalid name
   |
   = help: use lowercase with hyphens: "my-package"
```

**References:** [RFC-0019](/specs/rfc/RFC-0019) (Package Manifest Format)

---

### KRG2004: TokenExpired

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
authentication token has expired
```

**Primary Span:** N/A

**Help:** Refresh your authentication token.

**Example:**

```
error[KRG2004]: authentication token has expired
   |
   = note: token expired 2 days ago
   = help: run `kintsu login` to re-authenticate
   = help: or run `kintsu login --refresh` to refresh the token
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG2005: InvalidRegistryUrl

**Severity:** Error
**Phase:** Validation

**Message:**

```
invalid registry URL '{url}': {reason}
```

**Primary Span:** The registry URL in configuration

**Help:** Ensure the registry URL is a valid HTTPS URL.

**Example:**

```
error[KRG2005]: invalid registry URL 'registry.example.com': missing scheme
  --> ~/.config/kintsu/kintsu.toml:5:7
   |
 5 | url = "registry.example.com"
   |       ^^^^^^^^^^^^^^^^^^^^^^^ missing https:// scheme
   |
   = help: use `url = "https://registry.example.com"`
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG3001: VersionAlreadyExists

**Severity:** Error
**Phase:** Publish

**Message:**

```
version '{version}' of package '{name}' already exists
```

**Primary Span:** The version in manifest

**Help:** Increment the version number before publishing.

**Example:**

```
error[KRG3001]: version '1.0.0' of package 'my-package' already exists
  --> schema.toml:3:11
   |
 3 | version = "1.0.0"
   |            ^^^^^ already published
   |
   = help: increment version to "1.0.1" or "1.1.0"
```

**References:** [RFC-0019](/specs/rfc/RFC-0019) (Package Manifest Format)

---

### KRG4001: CredentialStoreUnavailable

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
credential store unavailable: {reason}
```

**Primary Span:** N/A

**Help:** Check your system keychain/credential store configuration.

**Example:**

```
error[KRG4001]: credential store unavailable: keychain is locked
   |
   = note: unable to access system keychain for stored credentials
   = help: unlock your system keychain and try again
   = help: or use `--token` flag to provide credentials directly
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG4002: CredentialNotFound

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
no credentials found for registry '{registry}'
```

**Primary Span:** N/A

**Help:** Log in to the registry to store credentials.

**Example:**

```
error[KRG4002]: no credentials found for registry 'corp'
   |
   = help: run `kintsu login --registry corp` to authenticate
```

**References:** [RFC-0022](/specs/rfc/RFC-0022) (User Configuration)

---

### KRG9001: NetworkError

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
network error: {reason}
```

**Primary Span:** N/A

**Help:** Check your network connection and try again.

**Example:**

```
error[KRG9001]: network error: connection timed out
   |
   = help: check your internet connection
   = help: retry with `--retry` flag
```

**References:** [RFC-0021](/specs/rfc/RFC-0021) (Registry API)

---

### KRG9002: RegistryUnavailable

**Severity:** Error
**Phase:** Registry Operation

**Message:**

```
registry unavailable: {reason}
```

**Primary Span:** N/A

**Help:** The registry service may be experiencing issues. Try again later.

**Example:**

```
error[KRG9002]: registry unavailable: service maintenance
   |
   = note: the registry is undergoing scheduled maintenance
   = help: try again in a few minutes
```

**References:** [RFC-0021](/specs/rfc/RFC-0021) (Registry API)

---

## References

- [RFC-0019](/specs/rfc/RFC-0019) - Package Manifest Format
- [RFC-0021](/specs/rfc/RFC-0021) - Registry API
- [RFC-0022](/specs/rfc/RFC-0022) - User Configuration
- [ERR-0001](/specs/err/ERR-0001) - Error System Overview
